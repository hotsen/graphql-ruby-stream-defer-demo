<%= render partial: "query" %>

<script>
 $(function() {
   // Handle button clicks by sending the query to the server
   $(".send").on("click", function() {
     var container = $(this).closest(".query-container")
     var queryString = container.find(".query").val()

     // Handle incoming data by rendering it into the response window
     var onResponse = function(data) {
       var resultString = JSON.stringify(data, undefined, 2)
       container.find(".response").text(resultString)
     }

     StreamingGraphQLClient.fetch("/chunked_graphql", queryString, {}, onResponse)
   })
 })
</script>
